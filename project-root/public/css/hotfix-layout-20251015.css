/* ===== Fluid Container System v2 – Non-destructive (2025-10-15) ===== */
*, *::before, *::after { box-sizing: border-box; }
html, body { width: 100%; max-width: 100%; }
html { -webkit-text-size-adjust: 100%; }
body { margin: 0; overflow-x: hidden; min-height: 100dvh; }

/* FLUID TOKENS (ไม่แตะสี) */
:root{
  /* กว้างขึ้นบนจอ 1280 โดยยังมีระยะขอบ */
  --container-max: 1360px;             /* เดิม 1280 → ขยับนิดให้เต็มจอ 13" มากขึ้น */
  --container-max-wide: 1440px;        /* สำหรับ desktop กว้าง */
  --gutter: clamp(16px, 3.2vw, 32px);  /* ระยะขอบซ้าย/ขวาแบบไหล */
  --gap: clamp(12px, 2vw, 24px);
  --card-min: 320px;                   /* เพิ่มขั้นต่ำการ์ดเพื่ออ่านง่ายบน 1280px */
}

/* 1) ช่องหลักทุกหน้า: กึ่งกลาง + กว้างขึ้น (ดีบน 1280) */
:where(main, .main, .page, .page-content, .content, .dashboard, .app-shell){
  width: min(100%, var(--container-max));
  margin-inline: auto;
  padding-inline: var(--gutter);
}
@media (min-width: 1600px){
  :where(main, .main, .page, .page-content, .content, .dashboard, .app-shell){
    width: min(100%, var(--container-max-wide));
  }
}

/* 2) กันล้น */
:where(img, svg, canvas, video){ max-width: 100%; height: auto; display: block; }
:where(table, .table, .data-grid){ display: block; overflow-x: auto; -webkit-overflow-scrolling: touch; }

/* 3) หน้า Login: จริง ๆ ต้องกึ่งกลางและไม่ถูกคอลัมน์ขวาดัน */
:where(.login, .auth, .login-page, .auth-page){
  min-height: 100dvh;
  display: grid;
  align-content: center;
  justify-items: center;
  padding-block: clamp(24px, 6vh, 64px);
}
:where(.login .card, .auth .card, .auth-card, .login-card, form.login, form.auth){
  width: min(100%, 560px);
  margin-inline: auto;
}

/* 4) ซ่อนแถบ/การ์ด/ภาพตกแต่งทางขวา ที่ทำให้เกิดพื้นที่ว่างใหญ่บนจอกลาง */
@media (max-width: 1600px){
  :where(.auth [class*="promo"], .auth [class*="banner"], .login [class*="promo"], .login [class*="banner"],
         .auth [class*="right"], .login [class*="right"], .auth [class*="aside"], .login [class*="aside"],
         .dashboard [class*="promo"], .dashboard [class*="right"], .dashboard [class*="aside"]) {
    display: none !important;
  }
}

/* 5) โครง Layout + Sidebar */
:where(.layout, .app-layout, .shell){
  display: grid;
  grid-template-columns: minmax(0, 1fr); /* จอเล็ก: คอลัมน์เดียว */
  gap: var(--gap);
}
@media (min-width: 1024px){
  :where(.layout.with-sidebar, .app-layout.with-sidebar, .shell.with-sidebar,
         .layout.has-sidebar, .shell.has-sidebar){
    grid-template-columns: 260px minmax(0, 1fr); /* sidebar + content */
    align-items: start;
  }
}
:where(.sidebar, .sidenav, .left-nav){ max-width: 100%; }

/* 6) กริดการ์ด KPI/Widgets – ใช้พื้นที่จอ 13" ให้คุ้ม */
:where(.cards, .card-grid, .widgets, .kpi-grid, .dashboard-cards){
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(min(100%, var(--card-min)), 1fr));
  gap: var(--gap);
}
/* เพิ่มกรณีพิเศษบนจอระหว่าง 1200–1400 ให้ชิด 3 คอลัมน์ได้พอดี */
@media (min-width: 1200px) and (max-width: 1440px){
  :where(.cards, .card-grid, .widgets, .kpi-grid, .dashboard-cards){
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }
}

/* 7) จังหวะเว้นวรรคแนวตั้ง */
:where(section, .section, .page-header, .group, .stack){ margin-block: clamp(16px, 4vh, 40px); }

/* 8) ปุ่ม/อินพุตเต็มแถวบนจอเล็ก (ไม่แตะโทนสี) */
:where(form .field, form .input, .btn, .button){ min-width: 0; }
@media (max-width: 768px){ :where(.btn, .button){ width: 100%; } }

/* 9) ป้องกัน anti-pattern 100vw + full-bleed ที่ทำให้เกิดสกรอลล์แนวนอน */
:where([style*="width: 100vw"], [class*="full-bleed"]){ width: 100% !important; }
:where(.bg, .background, .decor, .gradient, [class*="gradient"]){
  max-width: 100%;
  overflow: clip;
  pointer-events: none;
}

/* 10) การ์ดไม่ล้น/ไม่ดันรอบข้าง */
:where(.card, .panel, .widget, .box){ overflow: hidden; border-radius: inherit; }
