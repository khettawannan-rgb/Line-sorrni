<% /* project-root/src/views/login.ejs */ %>
<% if (isLineMobile) { %>
  <section class="line-login" aria-label="เข้าสู่ระบบ NILA Procurement">
    <header class="line-login__hero">
      <div class="line-login__brand">
        <img src="/static/img/Nila_Flatcolour_Logo-.png" alt="NILA" />
        <div>
          <span class="line-login__tag">NILA · Procurement</span>
          <h1>เข้าสู่ระบบจัดซื้อ</h1>
          <p>ลงชื่อเข้าเพื่อสร้าง PR/PO และติดตามสถานะงานผ่าน LINE ได้ทุกที่</p>
        </div>
      </div>
      <ul class="line-login__stats">
        <li>
          <strong>รวดเร็ว</strong>
          <span>ส่งคำขอซื้อภายในไม่กี่นาที</span>
        </li>
        <li>
          <strong>โปร่งใส</strong>
          <span>ติดตามสถานะ PO ได้แบบเรียลไทม์</span>
        </li>
      </ul>
    </header>

    <% if (typeof error !== 'undefined' && error) { %>
      <div class="line-login__alert"><%= error %></div>
    <% } %>

    <form method="post" action="/admin/login" class="line-login__form">
      <label>
        <span>Username</span>
        <input type="text" name="username" autocomplete="username" required />
      </label>
      <label>
        <span>Password</span>
        <input type="password" name="password" autocomplete="current-password" required />
      </label>
      <button type="submit" class="line-login__submit">เข้าสู่ระบบ</button>
    </form>

    <div class="line-login__quick">
      <span class="line-login__quick-title">เมนูลัดหลังเข้าสู่ระบบ</span>
      <div class="line-login__quick-grid">
        <a href="/admin/pr" class="line-login__quick-btn" aria-label="ดูรายการ PR">
          <span>ดู PR</span>
          <small>ตรวจสอบคำขอซื้อ</small>
        </a>
        <a href="/admin/po/new" class="line-login__quick-btn line-login__quick-btn--primary" aria-label="สร้างใบสั่งซื้อใหม่">
          <span>สร้าง PO</span>
          <small>เริ่มใบสั่งซื้อทันที</small>
        </a>
        <a href="/admin/po" class="line-login__quick-btn" aria-label="ดูสถานะใบสั่งซื้อ">
          <span>ติดตาม PO</span>
          <small>อัปเดตสถานะล่าสุด</small>
        </a>
      </div>
    </div>

    <% if (process.env.NODE_ENV === 'development') { %>
      <a href="/admin/login?uid=U3cbb8e21f7603d7eaa5a88cbba51c77b" class="line-login__dev-link">
        Bypass Login (Super Admin)
      </a>
    <% } %>

    <footer class="line-login__footer">
      <small>© <%= new Date().getFullYear() %> NILA Solutions · LINE Procurement Portal</small>
    </footer>
  </section>
<% } else { %>
  <div class="login-shell">
    <div class="login-frame">
      <aside class="login-aside">
        <div class="login-aside-overlay">
          <div class="login-aside-brand">
            <img src="/static/img/Nila_Flatcolour_Logo-.png" alt="NILA" />
            <span>NILA · LINE ERP</span>
          </div>
          <div class="login-aside-body">
            <h2>ภาพรวมที่ควบคุมได้ทุกสาขา</h2>
            <p>เชื่อมข้อมูลจากทุกจังหวัด ติดตามทีมงาน และดูพยากรณ์อากาศในแดชบอร์ดเดียว</p>
            <div class="login-aside-stats">
              <div>
                <strong>+32%</strong>
                <span>อัตราการตอบกลับไวขึ้นหลังเริ่มใช้</span>
              </div>
              <div>
                <strong>24 จังหวัด</strong>
                <span>มีรายงานตำแหน่งล่าสุดภายในระบบ</span>
              </div>
            </div>
          </div>
        </div>
      </aside>

      <main class="login-main">
        <header class="login-main-header">
          <span>ยินดีต้อนรับกลับ</span>
        </header>

        <% if (typeof error !== 'undefined' && error) { %>
          <div class="alert error"><%= error %></div>
        <% } %>

        <section class="login-main-body">
          <h1>เข้าสู่ระบบเพื่อจัดการงาน</h1>
          <p class="subtitle">กรุณากรอกข้อมูลผู้ใช้เพื่อเข้าสู่ระบบจัดการของคุณ</p>

          <form method="post" action="/admin/login" class="login-form">
            <label>
              <span>Username</span>
              <input type="text" name="username" autocomplete="username" required />
            </label>
            <label>
              <span>Password</span>
              <input type="password" name="password" autocomplete="current-password" required />
            </label>
            <div class="login-meta">
              <label class="remember">
                <input type="checkbox" disabled checked />
                <span>จำฉันไว้</span>
              </label>
              <a class="muted" href="#">ลืมรหัสผ่าน?</a>
            </div>
            <button type="submit" class="btn primary btn-lg">เข้าสู่ระบบ</button>
          </form>

          <% if (process.env.NODE_ENV === 'development') { %>
            <a href="/admin/login?uid=U3cbb8e21f7603d7eaa5a88cbba51c77b" class="btn ghost btn-block dev-bypass">
              Bypass Login (Super Admin)
            </a>
          <% } %>
        </section>

        <footer class="login-main-footer">
          <small>© <%= new Date().getFullYear() %> NILA Solutions · All rights reserved.</small>
        </footer>
      </main>
    </div>
  </div>
<% } %>
