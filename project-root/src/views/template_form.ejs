<!-- src/views/template_form.ejs -->
<%
  const isEdit = !!(t && t._id);
  const formAction = isEdit ? `/admin/templates/${t._id}/edit` : '/admin/templates/new';
%>

<div class="panel">
  <div class="panel-header panel__header">
    <h2><%= isEdit ? 'Edit Template' : 'New Template' %></h2>
  </div>

  <% if (error) { %>
    <div class="alert error"><%= error %></div>
  <% } %>

  <form class="form" action="<%= formAction %>" method="post">
    <div class="form-row">
      <label>Name</label>
      <input type="text" name="name" value="<%= (t && t.name) || '' %>" required />
    </div>

    <div class="form-row">
      <label>Code</label>
      <input type="text" name="code" value="<%= (t && t.code) || '' %>" required />
    </div>

    <div class="form-row">
      <label>Content</label>
      <textarea name="content" rows="12" placeholder="Template content"><%= (t && t.content) || '' %></textarea>
    </div>

    <div class="form-actions">
      <a class="btn ghost" href="/admin/templates">Back</a>
      <button class="btn primary" type="submit"><%= isEdit ? 'Save' : 'Create' %></button>
    </div>
  </form>
</div>
